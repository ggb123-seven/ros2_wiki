{% extends "base.html" %}

{% block title %}ROS2 Wiki - 专业的机器人开发知识库{% endblock %}

{% block content %}
<!-- 主横幅区域 -->
<div class="hero-section">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6">
                <div class="hero-content">
                    <div class="mb-4">
                        <span class="badge bg-light text-dark px-3 py-2 rounded-pill mb-3" style="font-size: 0.9rem;">
                            <i class="fas fa-robot me-2"></i>专业机器人开发平台
                        </span>
                    </div>
                    <h1 class="display-2 fw-bold text-gradient mb-4">
                        欢迎来到<br>
                        <span style="background: linear-gradient(45deg, #fbbf24, #f59e0b); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">WIKI</span>知识库
                    </h1>
                    <p class="lead mb-4 fs-4" style="color: rgba(255,255,255,0.9); font-weight: 300;">
                        专业的ROS2学习和知识分享平台<br>
                        <span style="color: rgba(255,255,255,0.8); font-size: 1.1rem;">让机器人开发更简单，让知识传播更高效</span>
                    </p>
                    <div class="hero-buttons d-flex flex-wrap gap-4 mb-5">
                        <a href="{{ url_for('documents') }}" class="btn btn-primary btn-lg">
                            <i class="fas fa-book-open me-2"></i>浏览文档
                        </a>
                        {% if current_user.is_authenticated and current_user.is_admin %}
                        <a href="{{ url_for('create_document') }}" class="btn btn-outline-primary btn-lg">
                            <i class="fas fa-plus me-2"></i>上传文档
                        </a>
                        {% endif %}
                    </div>
                    <div class="hero-stats d-flex gap-4 text-center">
                        <div>
                            <div class="h4 mb-0 fw-bold">{{ stats.total_documents }}+</div>
                            <small style="color: rgba(255,255,255,0.7);">技术文档</small>
                        </div>
                        <div>
                            <div class="h4 mb-0 fw-bold">{{ stats.total_users }}+</div>
                            <small style="color: rgba(255,255,255,0.7);">活跃用户</small>
                        </div>
                        <div>
                            <div class="h4 mb-0 fw-bold">{{ stats.total_views }}+</div>
                            <small style="color: rgba(255,255,255,0.7);">总浏览量</small>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="code-preview-container">
                    <div class="code-preview">
                        <div class="code-header">
                            <div class="code-dots">
                                <span class="dot red"></span>
                                <span class="dot yellow"></span>
                                <span class="dot green"></span>
                            </div>
                            <span class="code-title">
                                <i class="fab fa-python me-2"></i>ros2_hello.py
                            </span>
                            <div class="code-actions">
                                <i class="fas fa-copy" title="复制代码"></i>
                                <i class="fas fa-expand" title="全屏"></i>
                            </div>
                        </div>
                        <div class="code-content">
                            <div class="code-line">
                                <span class="line-number">1</span>
                                <span class="code-comment">#!/usr/bin/env python3</span>
                            </div>
                            <div class="code-line">
                                <span class="line-number">2</span>
                                <span class="code-keyword">import</span> <span class="code-module">rclpy</span>
                            </div>
                            <div class="code-line">
                                <span class="line-number">3</span>
                                <span class="code-keyword">from</span> <span class="code-module">rclpy.node</span> <span class="code-keyword">import</span> <span class="code-class">Node</span>
                            </div>
                            <div class="code-line">
                                <span class="line-number">4</span>
                                <span class="code-keyword">from</span> <span class="code-module">std_msgs.msg</span> <span class="code-keyword">import</span> <span class="code-class">String</span>
                            </div>
                            <div class="code-line"><span class="line-number">5</span></div>
                            <div class="code-line">
                                <span class="line-number">6</span>
                                <span class="code-keyword">class</span> <span class="code-class">HelloPublisher</span>(<span class="code-class">Node</span>):
                            </div>
                            <div class="code-line">
                                <span class="line-number">7</span>
                                &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">def</span> <span class="code-function">__init__</span>(<span class="code-keyword">self</span>):
                            </div>
                            <div class="code-line">
                                <span class="line-number">8</span>
                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">super</span>().__init__(<span class="code-string">'hello_publisher'</span>)
                            </div>
                            <div class="code-line">
                                <span class="line-number">9</span>
                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">self</span>.publisher_ = <span class="code-keyword">self</span>.create_publisher(
                            </div>
                            <div class="code-line">
                                <span class="line-number">10</span>
                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-class">String</span>, <span class="code-string">'hello_topic'</span>, <span class="code-number">10</span>)
                            </div>
                        </div>
                        <div class="code-output">
                            <div class="output-header">
                                <i class="fas fa-terminal me-2"></i>Output
                                <span class="output-status">
                                    <i class="fas fa-circle text-success"></i> Running
                                </span>
                            </div>
                            <div class="output-content">
                                <div class="output-line">
                                    <span class="output-timestamp">[INFO]</span>
                                    <span class="output-text">Welcome to WIKI!</span>
                                </div>
                                <div class="output-line">
                                    <span class="output-timestamp">[INFO]</span>
                                    <span class="output-text">Powered by 米醋电子工作室</span>
                                </div>
                                <div class="output-line">
                                    <span class="output-timestamp">[INFO]</span>
                                    <span class="output-text">ROS2 Node initialized successfully</span>
                                </div>
                                <div class="cursor">_</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 统计数据卡片 -->
<div class="stats-section py-5">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="display-5 fw-bold text-dark mb-3">平台数据概览</h2>
            <p class="lead text-muted">实时展示平台的核心数据指标</p>
        </div>
        <div class="row g-4">
            <div class="col-lg-3 col-md-6">
                <div class="stat-card h-100" data-aos="fade-up" data-aos-delay="100">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #3b82f6, #1d4ed8);">
                        <i class="fas fa-file-code"></i>
                    </div>
                    <div class="stat-content">
                        <h3 class="stat-number">{{ stats.total_documents }}</h3>
                        <p class="stat-label">技术文档</p>
                        <div class="stat-trend">
                            <i class="fas fa-arrow-up text-success me-1"></i>
                            <small class="text-success">+12% 本月</small>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="stat-card h-100" data-aos="fade-up" data-aos-delay="200">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #10b981, #059669);">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="stat-content">
                        <h3 class="stat-number">{{ stats.total_users }}</h3>
                        <p class="stat-label">活跃用户</p>
                        <div class="stat-trend">
                            <i class="fas fa-arrow-up text-success me-1"></i>
                            <small class="text-success">+8% 本月</small>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="stat-card h-100" data-aos="fade-up" data-aos-delay="300">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #f59e0b, #d97706);">
                        <i class="fas fa-eye"></i>
                    </div>
                    <div class="stat-content">
                        <h3 class="stat-number">{{ stats.total_views }}</h3>
                        <p class="stat-label">总浏览量</p>
                        <div class="stat-trend">
                            <i class="fas fa-arrow-up text-success me-1"></i>
                            <small class="text-success">+25% 本月</small>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="stat-card h-100" data-aos="fade-up" data-aos-delay="400">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #ef4444, #dc2626);">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="stat-content">
                        <h3 class="stat-number">{{ stats.days_since_launch }}<span class="stat-unit">天</span></h3>
                        <p class="stat-label">稳定运行</p>
                        <div class="stat-trend">
                            <i class="fas fa-check-circle text-success me-1"></i>
                            <small class="text-success">99.9% 可用性</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 文档展示区域 -->
<div class="documents-section py-5 bg-light">
    <div class="container">
        <div class="row">
            <!-- 最新文档 -->
            <div class="col-lg-6 mb-4">
                <div class="section-header d-flex align-items-center justify-content-between mb-4">
                    <h2 class="section-title mb-0">
                        <i class="fas fa-star text-warning me-2"></i>最新文档
                    </h2>
                    <a href="{{ url_for('documents') }}" class="btn btn-sm btn-outline-primary">
                        查看更多 <i class="fas fa-arrow-right ms-1"></i>
                    </a>
                </div>
                <div class="document-list">
                    {% for doc in latest_docs %}
                    <div class="document-card-simple mb-3 p-3 border rounded">
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="flex-grow-1">
                                <h6 class="document-title mb-1">
                                    <a href="{{ url_for('view_document', doc_id=doc.id) }}" class="text-decoration-none text-dark">
                                        {{ doc.title }}
                                    </a>
                                </h6>
                                <small class="text-muted">
                                    <i class="fas fa-calendar me-1"></i>{{ doc.created_at.strftime('%m-%d') }}
                                </small>
                            </div>
                            <span class="document-category badge bg-primary ms-2">{{ doc.category }}</span>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
            
            <!-- 添加文档区域 -->
            <div class="col-lg-6">
                <div class="section-header mb-4">
                    <h2 class="section-title">
                        <i class="fas fa-plus text-success me-2"></i>添加文档
                    </h2>
                </div>
                <div class="add-document-card h-100">
                    <div class="add-document-content text-center">
                        <div class="add-document-icon mb-4">
                            <i class="fas fa-file-plus"></i>
                        </div>
                        <h4 class="mb-3">分享您的知识</h4>
                        <p class="text-muted mb-4">
                            帮助其他开发者学习ROS2，分享您的经验和技巧，共同构建更好的知识库
                        </p>
                        {% if current_user.is_authenticated and current_user.is_admin %}
                        <a href="{{ url_for('create_document') }}" class="btn btn-success btn-lg px-4">
                            <i class="fas fa-plus me-2"></i>创建新文档
                        </a>
                        {% else %}
                        <div class="alert alert-info">
                            <i class="fas fa-info-circle me-2"></i>
                            需要管理员权限才能创建文档
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
